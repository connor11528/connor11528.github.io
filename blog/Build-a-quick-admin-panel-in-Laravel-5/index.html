<!DOCTYPE html><html lang="en" prefix="og: http://ogp.me/ns#"><head><meta name="generator" content="Hexo 3.8.0"><meta name="author" content="Connor Leech"><title>Build an admin panel using Laravel 5</title><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta http-equiv="cleartype" content="on"><meta name="MobileOptimized" content="320"><meta name="HandheldFriendly" content="True"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><meta name="description" content="Authorization and admin panels have always been a sticky point for me. This is the simplist way I know how to build one, using Laravel"><meta name="keywords" content="laravel, aws, javascript, php, developer, software engineer, web development, software, node.js, serverless, lambda, san francisco, bay area, east bay, vue, vuejs, vue.js, vue 2, laravel 5, amazon web services"><meta name="zipcode" content="94501"><meta name="city" content="Alameda"><meta name="state" content="California"><meta name="country" content="United States"><meta name="language" content="EN"><meta property="og:site_name" content="Connor Leech Blog | Javascript and Laravel tutorials"><meta property="og:description" content="Get notified about the latest trends in web development, career growth and cloud infrastructure. I send emails about twice a month covering tutorials in Javascript, Laravel and Cloud"><meta property="og:image" content="http://i0.kym-cdn.com/photos/images/original/001/018/899/936.jpg"><meta property="og:title" content="Build an admin panel using Laravel 5"><meta property="og:description" content="Authorization and admin panels have always been a sticky point for me. This is the simplist way I know how to build one, using Laravel"><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-70809574-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'UA-70809574-1');
</script><!-- Favicon--><link rel="shortcut icon" type="image/png" href="/images/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><!-- Vendor Fonts--><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link href="/bower_components/animate.css/animate.min.css" rel="stylesheet" type="text/css"><link href="https://fonts.googleapis.com/css?family=Yantramanav" rel="stylesheet"><!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries--><!-- WARNING: Respond.js doesn't work if you view the page via file://--><!--if lt IE 9script(src='https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js')
script(src='https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js')
--><link rel="alternate" href="/atom.xml" title="config.title" type="application/rss2.xml"><link rel="stylesheet" href="/css/main.css"></head><body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top" class="post"><!-- Nav--><nav role="navigation" class="navbar navbar-custom navbar-fixed-top"><div class="container"><div class="navbar-header"><a href="https://employbl.com/" target="_blank" class="navbar-brand"><img src="/images/employbl_logo.svg" style="height:100px; width:100px;"></a><button type="button" data-toggle="collapse" data-target=".navbar-main-collapse" class="navbar-toggle"><i class="fa fa-bars"></i></button></div><div class="collapse navbar-collapse navbar-left navbar-main-collapse"></div><div class="collapse navbar-collapse navbar-right navbar-main-collapse"><ul class="nav navbar-nav"><li><a href="/blog" class="page-scroll">Blog üî®</a></li><li><a href="/#about" class="page-scroll">Projects ‚ö°</a></li></ul></div></div></nav><main id="content"><div id="archive" class="container"><div class="row"> <div class="col-sm-2 col-md-2"><h3>Categories</h3><a href="/blog"><p>All</p></a><a href="/categories/Career"><p>Career</p></a><a href="/categories/Programming"><p>Programming</p></a><a href="/categories/Javascript"><p>Javascript</p></a><a href="/categories/Laravel"><p>Laravel</p></a><a href="/categories/Cloud"><p>Cloud</p></a><a href="/categories/PHP"><p>PHP</p></a></div><div class="col-xs-12 col-md-8"><article class="post"><div class="row"><div class="col-md-10 col-md-offset-1"><h1 class="post-title">Build an admin panel using Laravel 5</h1></div></div><div class="row"><div class="post-meta"><h5><span>Connor Leech</span><span class="date"> - Mar 1, 2018&ensp;in<span class="post-categories">&ensp;<a href="/categories/Laravel/" class="post-category">Laravel</a></span></span></h5><a target="_blank" href="http://twitter.com/intent/tweet?status=Build an admin panel using Laravel 5 by @Connor11528+http://connorleech.info/blog/Build-a-quick-admin-panel-in-Laravel-5/" class="btn btn-primary social-share twitter"><i class="fa fa-twitter fa-2x"><span class="hidden-xs"></span></i></a><a target="_blank" href="http://www.linkedin.com/shareArticle?mini=true&amp;url=http://connorleech.info/blog/Build-a-quick-admin-panel-in-Laravel-5/&amp;title=Build an admin panel using Laravel 5&amp;source=connorleech.info" class="btn btn-primary social-share linkedin"><i class="fa fa-linkedin fa-2x"><span class="hidden-xs"></span></i></a></div></div><div class="post-body"><p>Authorization can be tricky. There are thousands of posts about how to perform authentication, but actually verifying who someone is and managing user permissions can be a whole can of worms. Fortunately, Laravel has systems in place that make a tiered login system very easy to implement.</p>
<p>Before we get started I‚Äôd like to give props üëè to <a href="https://nick-basile.com/blog/post/how-to-build-an-admin-in-laravel-using-tdd" target="_blank" rel="noopener">Nick Basile</a> and his excellent blog posts on this topic. To add authentication to a Laravel 5 app, all you need is one command:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> php artisan make:auth</span></span><br></pre></td></tr></table></figure>
<p>That‚Äôs it. If you‚Äôre new to Laravel, welcome. For Laravel developers this feature has been around for a long time. Now we‚Äôve got our auth system with login forms and everything. That all works, but for the purposes of this post we‚Äôre interested in authorization.</p>
<blockquote>
<p>Source code for this article is available <a href="https://github.com/connor11528/laravel-vue-tasks" target="_blank" rel="noopener">on github</a></p>
</blockquote>
<p>Easy solution for making a Laravel admin page using custom middleware
I am using Laravel 5.5 right now, the latest release. The only specific Laravel 5.5 thing going on is the @guest helper in the frontend Blade directives. In the HTML section of the application, these helpers allow us to easily check if the user is logged in or not:</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@auth</span></span><br><span class="line">    <span class="comment">// The user is authenticated...</span></span><br><span class="line"><span class="variable">@endauth</span></span><br><span class="line"></span><br><span class="line"><span class="variable">@guest</span></span><br><span class="line">    <span class="comment">// The user is not authenticated...</span></span><br><span class="line"><span class="variable">@endguest</span></span><br></pre></td></tr></table></figure>
<p>If you‚Äôre not using Laravel 5.5 there are other workarounds but you might as well upgrade to the latest version for the new features!</p>
<h2 id="üîí-Okay-actually-building-the-system-now"><a href="#üîí-Okay-actually-building-the-system-now" class="headerlink" title="üîí Okay, actually building the system now"></a>üîí Okay, actually building the system now</h2><p>There are lots of ways to build an authorization system. There are pre-built packages that allow you to manage roles and permissions. I‚Äôm sure they‚Äôre great as they are maintained by Spatie, who makes all the bomb Laravel packages. For this though, I didn‚Äôt want to bring in a heavy package and make it work. All I wanted for this Laravel app was to have a little quiet place that only I, as an administrator can login to. Everyone else can login and see their dashboard or profile or whatever but only I can login and see an admin page.</p>
<p>How we achieve this is to add a type column on the users table and check if a user has that type via custom middleware. It sounds fancy but it‚Äôs pretty easy!</p>
<p>1 - Add the types you want to the User model and a method to check if a user is an admin.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* app/User.php */</span></span><br><span class="line"><span class="keyword">const</span> ADMIN_TYPE = <span class="string">'admin'</span>;</span><br><span class="line"><span class="keyword">const</span> DEFAULT_TYPE = <span class="string">'default'</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">isAdmin</span><span class="params">()</span>    </span>&#123;        </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;type === <span class="keyword">self</span>::ADMIN_TYPE;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2 - Add the type column to the migration that created your users table</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* database/migrations/2014_10_12_000000_create_users_table.php */</span></span><br><span class="line">$table-&gt;string<span class="function"><span class="params">(<span class="string">'type'</span>)</span>-&gt;</span><span class="keyword">default</span>(<span class="string">'default'</span>);</span><br></pre></td></tr></table></figure>
<p>3 - Add a type value to the create method in register controller</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* app/Http/Controllers/Auth/RegisterController.php */</span></span><br><span class="line"><span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">create</span><span class="params">(array $data)</span>    </span>&#123;        </span><br><span class="line">    <span class="keyword">return</span> User::create([            </span><br><span class="line">        <span class="string">'name'</span> =&gt; $data[<span class="string">'name'</span>],</span><br><span class="line">        <span class="string">'email'</span> =&gt; $data[<span class="string">'email'</span>],            </span><br><span class="line">        <span class="string">'password'</span> =&gt; bcrypt($data[<span class="string">'password'</span>]),            </span><br><span class="line">        <span class="string">'type'</span> =&gt; User::DEFAULT_TYPE,        </span><br><span class="line">    ]);    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4 - Create a custom middleware file to check if a user is an admin. Generate this file using php artisan make:middleware IsAdmin</p>
<p>5 - Register the middleware you just created</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* app/Http/Kernel.php */</span></span><br><span class="line"><span class="string">'is_admin'</span> =&gt; \App\Http\Middleware\IsAdmin::<span class="class"><span class="keyword">class</span>,<span class="type"></span></span></span><br></pre></td></tr></table></figure>
<p>6 - Add some routes that invoke the middleware</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* routes/web.php */</span></span><br><span class="line">Route::view(<span class="string">'/'</span>, <span class="string">'welcome'</span>);</span><br><span class="line">Auth::routes();</span><br><span class="line">Route::get(<span class="string">'/home'</span>, <span class="string">'HomeController@index'</span>)    </span><br><span class="line"><span class="function">    -&gt;</span>name(<span class="string">'home'</span>);</span><br><span class="line">Route::get(<span class="string">'/admin'</span>, <span class="string">'AdminController@admin'</span>)    </span><br><span class="line"><span class="function">    -&gt;</span>middleware(<span class="string">'is_admin'</span>)    </span><br><span class="line"><span class="function">    -&gt;</span>name(<span class="string">'admin'</span>);</span><br></pre></td></tr></table></figure>
<p>7 - Create an admin controller with <code>php artisan make:controller AdminController</code>. This controller returns the dashboard for whatever view you want your admin to see.</p>
<h2 id="üéâ-That‚Äôs-pretty-much-it"><a href="#üéâ-That‚Äôs-pretty-much-it" class="headerlink" title="üéâ That‚Äôs pretty much it!"></a>üéâ That‚Äôs pretty much it!</h2><p>Now if you visit /admin and you‚Äôre not logged in or logged in as an administrator you won‚Äôt be able to access the page. In order to create an admin user you can use the tinker artisan comman:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> php artisan tinker</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; use App\User;</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;User::<span class="built_in">where</span>(<span class="string">'email'</span>, <span class="string">'connorleech@gmail.com'</span>)-&gt;update([<span class="string">'type'</span> =&gt; <span class="string">'admin'</span>]);</span></span><br></pre></td></tr></table></figure>
<p>Then when you login as that user you will be able to see the admin page!</p>
<hr>
<p>Full post <a href="https://medium.com/@connorleech/easily-build-administrator-login-into-a-laravel-5-app-8a942e4fef37" target="_blank" rel="noopener">on Medium</a></p>
</div><div id="disqus_thread"></div></article><nav class="pagination"><a href="/blog/email-verification-in-a-laravel-5-app/" title="Email verification in a Laravel 5 app" class="btn-default entry-pagination__link entry-pagination__link--prev">Prev</a><a href="/blog/create-a-wordpress-site-from-the-command-line/" title="Create a Wordpress site from the command line with wp-cli" class="btn-default entry-pagination__link entry-pagination__link--next">Next</a></nav></div></div></div></main><footer class="footer"><div class="container"><div class="row"><div class="col-sm-6"><h4>Connor's Dev Newsletter</h4><p>Very occassional updates. You're free to sign up.</p><ul><li><form action="//herokuapp.us14.list-manage.com/subscribe/post?u=42dd73a709fbadb4a29ef1d0d&amp;amp;id=b77fdad58d" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank" novalidate="" class="validate"><div class="input-group"><input type="email" value="" name="EMAIL" id="mce-EMAIL" placeholder="Enter your email here" class="required email form-control input-lg"><div id="mce-error-response" style="display:none" class="response"></div><div id="mce-success-response" style="display:none" class="response"></div><div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_42dd73a709fbadb4a29ef1d0d_b77fdad58d" tabindex="-1" value=""></div><span class="input-group-btn"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn btn-primary btn-lg"></span></div></form></li></ul></div><div class="col-sm-2 col-sm-offset-1"><h4>Connect</h4><ul><li> <a target="_blank" href="https://github.com/connor11528">GitHub</a></li><li> <a target="_blank" href="https://www.linkedin.com/in/connorleech">LinkedIn</a></li><li> <a target="_blank" href="https://twitter.com/connor11528">Twitter</a></li><li><a target="_blank" href="https://medium.com/@connorleech">Medium</a></li><li><a target="_blank" href="https://stackoverflow.com/users/2031033/connor-leech">Stackoverflow</a></li><li><a target="_blank" href="https://plus.google.com/u/0/+ConnorLeech">Google+</a></li></ul></div><div class="col-sm-3"><h4>Email</h4><ul><li> <a href="mailto:connorleech@gmail.com">connorleech@gmail.com</a></li></ul></div></div></div></footer><!-- vendor--><script src="/bower_components/jquery/dist/jquery.min.js"></script><script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script><script src="/bower_components/wow/dist/wow.min.js"></script><script src="/bower_components/jquery-easing/jquery.easing.min.js"></script><script src="/bower_components/jquery-color/jquery.color.js"></script><script src="/bower_components/scrollmagic/scrollmagic/minified/ScrollMagic.min.js"></script><script src="/bower_components/scrollmagic/scrollmagic/minified/plugins/debug.addIndicators.min.js"></script><script src="/bower_components/vivus/dist/vivus.min.js"></script><!-- require modules--><script src="/js/require.js"></script><script src="/js/app.js"></script><!-- analytics--><!-- disqus--><script>(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://connorleech.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();</script></body></html>
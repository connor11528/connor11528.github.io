<!DOCTYPE html><html lang="en" prefix="og: http://ogp.me/ns#"><head><meta name="generator" content="Hexo 3.8.0"><meta name="author" content="Connor Leech"><title>Part 2 - Add Angular.js to Ruby on Rails app</title><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta http-equiv="cleartype" content="on"><meta name="MobileOptimized" content="320"><meta name="HandheldFriendly" content="True"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><meta name="description" content="This article explains how to integrate Angular 1.x into a Ruby On Rails application."><meta name="keywords" content="laravel, aws, javascript, php, developer, software engineer, web development, software, node.js, serverless, lambda, san francisco, bay area, east bay, vue, vuejs, vue.js, vue 2, laravel 5, amazon web services"><meta name="zipcode" content="94501"><meta name="city" content="Alameda"><meta name="state" content="California"><meta name="country" content="United States"><meta name="language" content="EN"><meta property="og:site_name" content="Connor Leech Blog | Javascript and Laravel tutorials"><meta property="og:description" content="Get notified about the latest trends in web development, career growth and cloud infrastructure. I send emails about twice a month covering tutorials in Javascript, Laravel and Cloud"><meta property="og:image" content="http://i0.kym-cdn.com/photos/images/original/001/018/899/936.jpg"><meta property="og:title" content="Part 2 - Add Angular.js to Ruby on Rails app"><meta property="og:description" content="This article explains how to integrate Angular 1.x into a Ruby On Rails application."><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-70809574-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'UA-70809574-1');
</script><!-- Favicon--><link rel="shortcut icon" type="image/png" href="/images/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><!-- Vendor Fonts--><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link href="/bower_components/animate.css/animate.min.css" rel="stylesheet" type="text/css"><link href="https://fonts.googleapis.com/css?family=Yantramanav" rel="stylesheet"><!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries--><!-- WARNING: Respond.js doesn't work if you view the page via file://--><!--if lt IE 9script(src='https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js')
script(src='https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js')
--><link rel="alternate" href="/atom.xml" title="config.title" type="application/rss2.xml"><link rel="stylesheet" href="/css/main.css"></head><body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top" class="post"><!-- Nav--><nav role="navigation" class="navbar navbar-custom navbar-fixed-top"><div class="container"><div class="navbar-header"><a href="https://employbl.com/" target="_blank" class="navbar-brand"><img src="/images/employbl_logo.svg" style="height:100px; width:100px;"></a><button type="button" data-toggle="collapse" data-target=".navbar-main-collapse" class="navbar-toggle"><i class="fa fa-bars"></i></button></div><div class="collapse navbar-collapse navbar-left navbar-main-collapse"></div><div class="collapse navbar-collapse navbar-right navbar-main-collapse"><ul class="nav navbar-nav"><li><a href="/blog" class="page-scroll">Blog üî®</a></li><li><a href="/#about" class="page-scroll">Projects ‚ö°</a></li></ul></div></div></nav><main id="content"><div id="archive" class="container"><div class="row"> <div class="col-sm-2 col-md-2"><h3>Categories</h3><a href="/blog"><p>All</p></a><a href="/categories/Career"><p>Career</p></a><a href="/categories/Programming"><p>Programming</p></a><a href="/categories/Javascript"><p>Javascript</p></a><a href="/categories/Laravel"><p>Laravel</p></a><a href="/categories/Cloud"><p>Cloud</p></a><a href="/categories/PHP"><p>PHP</p></a></div><div class="col-xs-12 col-md-8"><article class="post"><div class="row"><div class="col-md-10 col-md-offset-1"><h1 class="post-title">Part 2 - Add Angular.js to Ruby on Rails app</h1></div></div><div class="row"><div class="post-meta"><h5><span>Connor Leech</span><span class="date"> - Dec 4, 2015&ensp;in<span class="post-categories">&ensp;<a href="/categories/Programming/" class="post-category">Programming</a></span></span></h5><a target="_blank" href="http://twitter.com/intent/tweet?status=Part 2 - Add Angular.js to Ruby on Rails app by @Connor11528+http://connorleech.info/blog/Add-Angular-js-to-Ruby-on-Rails-app/" class="btn btn-primary social-share twitter"><i class="fa fa-twitter fa-2x"><span class="hidden-xs"></span></i></a><a target="_blank" href="http://www.linkedin.com/shareArticle?mini=true&amp;url=http://connorleech.info/blog/Add-Angular-js-to-Ruby-on-Rails-app/&amp;title=Part 2 - Add Angular.js to Ruby on Rails app&amp;source=connorleech.info" class="btn btn-primary social-share linkedin"><i class="fa fa-linkedin fa-2x"><span class="hidden-xs"></span></i></a></div></div><div class="post-body"><p><img src="http://spr.com/wp-content/uploads/2015/08/RailsAngularBanner1.png" alt="Image from SPR Consulting"></p>
<p>In my <a href="https://medium.com/@jasonshark/ruby-on-rails-introduction-for-the-total-n00b-fdc1a7f6567e#.bfte8gwl7" target="_blank" rel="noopener">last ROR post</a> we set up a Rails app that displays a list from the database. Here is the <a href="https://github.com/cleechtech/rails-task-list" target="_blank" rel="noopener">SOURCE CODE</a>. (Give it a star on github!)</p>
<p>In this post we will add angular to the task list.</p>
<h2 id="Disable-turbolinks"><a href="#Disable-turbolinks" class="headerlink" title="Disable turbolinks"></a>Disable turbolinks</h2><p>Turbolinks is a feature new to Rails 4. It uses pushState to change the address of the current page, meaning scripts do not have to be reloaded. Angular already does some of this magic, though it is <a href="http://stackoverflow.com/questions/14797935/using-angularjs-with-turbolinks" target="_blank" rel="noopener">possible</a> to use angular and turbolinks together. For this app we‚Äôre going to stick with only angular, no turbolinks.</p>
<p>Remove <code>//= require turbolinks</code> from <strong>app/assets/javascripts/application.js</strong>.</p>
<p>Next remove <code>‚Äúdata-turbolinks-track‚Äù =&gt; true</code> from <strong>app/views/layouts/application.html.erb</strong>.</p>
<p>You can also remove <code>gem ‚Äòturbolinks‚Äô</code> from the <strong>Gemfile</strong>.</p>
<h2 id="Add-bower"><a href="#Add-bower" class="headerlink" title="Add bower"></a>Add bower</h2><p>You could download libraries directly and drop them into <strong>vendor/assets/javascripts/</strong> but instead we‚Äôre going to use bower to do this for us. Create a file in the root called <code>.bowerrc</code> (run <code>$ touch .bowerrc</code> from the command line) and install client side dependencies (meaning angular and ui-router).</p>
<p><strong>.bowerrc</strong> file looks like:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"directory"</span>: <span class="string">"vendor/assets/components"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Use tabs to spaces in the .bowerrc file. Install dependencies with:</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">bower </span>init &amp;&amp; <span class="keyword">bower </span>i angular angular-ui-router --save</span><br></pre></td></tr></table></figure>
<p>This creates the bower.json file and installs angular and angular-ui-router.</p>
<p>Next we need to tell the rails asset pipeline to load in what bower added to <strong>vendor/assets/components</strong>. Go to <strong>config/application.rb</strong> and add this line:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config<span class="selector-class">.assets</span><span class="selector-class">.paths</span> &lt;&lt; Rails<span class="selector-class">.root</span><span class="selector-class">.join</span>(‚Äòvendor‚Äô, ‚Äòassets‚Äô, ‚Äòcomponents‚Äô)</span><br></pre></td></tr></table></figure>
<p>When rails loads in our javascripts and stylesheets it will also know to load in from the ‚Äúcomponents‚Äù folder.</p>
<p>Next tell the application which <em>specific files</em> we want to load from the components directory. Update <strong>app/assets/javascripts/application.js</strong>:</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//= require jquery</span></span><br><span class="line"><span class="comment">//= require jquery_ujs</span></span><br><span class="line"><span class="comment">//= require angular/angular</span></span><br><span class="line"><span class="comment">//= require angular-ui-router/release/angular-ui-router</span></span><br></pre></td></tr></table></figure>
<p>Remove the <code>//= require_tree .</code> line. If we have that it will ignore the folder structure we set up later. The order our files loads in matter so get rid of it!</p>
<p>Start the rails server and open up the console. Type ‚Äúangular‚Äù and press enter. We‚Äôve used bower to load client libraries into Rails.</p>
<h2 id="Create-an-Angular-application"><a href="#Create-an-Angular-application" class="headerlink" title="Create an Angular application"></a>Create an Angular application</h2><p>Okay so we‚Äôve configured rails to load in the libraries, now we need to make our angular app and have that load in properly.</p>
<p>First attach a module to <strong>app/views/layouts/application.html.erb</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">ng-app</span>=<span class="string">‚Äôrails-task-list‚Äô</span>&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>Next make a folder for controllers and factories in <strong>app/assets/javascripts</strong></p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir app<span class="regexp">/assets/</span>javascripts<span class="regexp">/controllers app/</span>assets<span class="regexp">/javascripts/</span>factories</span><br></pre></td></tr></table></figure>
<p>Tell the asset pipeline about these new directories, add to <strong>config/application.rb</strong>:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">config<span class="selector-class">.assets</span><span class="selector-class">.paths</span> &lt;&lt; Rails<span class="selector-class">.root</span><span class="selector-class">.join</span>(‚Äòapp‚Äô, ‚Äòjavascripts‚Äô, ‚Äòcontrollers‚Äô)</span><br><span class="line"> config<span class="selector-class">.assets</span><span class="selector-class">.paths</span> &lt;&lt; Rails<span class="selector-class">.root</span><span class="selector-class">.join</span>(‚Äòapp‚Äô, ‚Äòjavascripts‚Äô, ‚Äòfactories‚Äô)</span><br></pre></td></tr></table></figure>
<p>Then in <strong>app/assets/javascripts/application.js</strong> instantiate the angular module.</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//= require jquery</span></span><br><span class="line"><span class="comment">//= require jquery_ujs</span></span><br><span class="line"><span class="comment">//= require angular/angular</span></span><br><span class="line"><span class="comment">//= require angular-ui-router/release/angular-ui-router</span></span><br><span class="line"><span class="comment">//= require_self</span></span><br><span class="line"><span class="comment">//= require controllers/task</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="keyword">app</span> = angular.module(‚Äòrails-task-<span class="keyword">list</span>‚Äô, [</span><br><span class="line"> ‚Äòui.router‚Äô</span><br><span class="line">]);</span><br></pre></td></tr></table></figure>
<p>Create a TaskCtrl in <strong>app/assets/javascripts/controllers/task.js</strong>:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">app.controller(‚ÄòTaskCtrl‚Äô, [</span><br><span class="line"> ‚Äò$scope‚Äô,</span><br><span class="line"> <span class="function"><span class="keyword">function</span><span class="params">($scope)</span></span>&#123;</span><br><span class="line">     $scope.message = ‚ÄòI come from the angular controller!‚Äô;</span><br><span class="line"> &#125;]);</span><br></pre></td></tr></table></figure>
<p>And finally update the task view in <strong>app/views/task/index.html.erb</strong>:</p>
<figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">‚Äôcontainer‚Äô</span> <span class="attr">ng-controller</span>=<span class="string">‚ÄôTaskCtrl‚Äô</span>&gt;</span></span></span><br><span class="line"><span class="xml"> <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">‚Äôrow</span> <span class="attr">text-center</span>‚Äô&gt;</span></span></span><br><span class="line"><span class="xml"> <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Tasks<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"> <span class="tag">&lt;<span class="name">pre</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"> <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">‚Äôlist-group‚Äô</span>&gt;</span></span></span><br><span class="line"><span class="xml"> <span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"> @tasks.each <span class="keyword">do</span> <span class="params">|task|</span> </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml"> <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">‚Äôlist-group-item‚Äô</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span></span></span><span class="ruby"> task.title </span><span class="xml"><span class="tag">%&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml"> <span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"> <span class="keyword">end</span> </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml"> <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>If you are not following along, make sure you created the Rails task controller like in the <a href="https://medium.com/@jasonshark/ruby-on-rails-introduction-for-the-total-n00b-fdc1a7f6567e#.bfte8gwl7" target="_blank" rel="noopener">last post</a>. In upcoming posts we will use ui-router with Ruby On Rails.</p>
<p>Source code: <a href="https://github.com/cleechtech/rails-task-list" target="_blank" rel="noopener">https://github.com/cleechtech/rails-task-list</a></p>
<p>Ask me questions or give feedback via comments or <a href="https://twitter.com/realjasonshark" target="_blank" rel="noopener">on twitter</a>!</p>
</div><div id="disqus_thread"></div></article><nav class="pagination"><a href="/blog/Add-angular-ui-router-to-a-Ruby-On-Rails-app/" title="Part 3 - Add angular-ui-router to a Ruby On Rails app" class="btn-default entry-pagination__link entry-pagination__link--prev">Prev</a><a href="/blog/Ruby On Rails‚Ääfor the MEAN stack developer/" title="Ruby On Rails‚Ääfor the MEAN stack developer" class="btn-default entry-pagination__link entry-pagination__link--next">Next</a></nav></div></div></div></main><footer class="footer"><div class="container"><div class="row"><div class="col-sm-6"><h4>Connor's Dev Newsletter</h4><p>Very occassional updates. You're free to sign up.</p><ul><li><form action="//herokuapp.us14.list-manage.com/subscribe/post?u=42dd73a709fbadb4a29ef1d0d&amp;amp;id=b77fdad58d" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank" novalidate="" class="validate"><div class="input-group"><input type="email" value="" name="EMAIL" id="mce-EMAIL" placeholder="Enter your email here" class="required email form-control input-lg"><div id="mce-error-response" style="display:none" class="response"></div><div id="mce-success-response" style="display:none" class="response"></div><div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_42dd73a709fbadb4a29ef1d0d_b77fdad58d" tabindex="-1" value=""></div><span class="input-group-btn"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn btn-primary btn-lg"></span></div></form></li></ul></div><div class="col-sm-2 col-sm-offset-1"><h4>Connect</h4><ul><li> <a target="_blank" href="https://github.com/connor11528">GitHub</a></li><li> <a target="_blank" href="https://www.linkedin.com/in/connorleech">LinkedIn</a></li><li> <a target="_blank" href="https://twitter.com/connor11528">Twitter</a></li><li><a target="_blank" href="https://medium.com/@connorleech">Medium</a></li><li><a target="_blank" href="https://stackoverflow.com/users/2031033/connor-leech">Stackoverflow</a></li><li><a target="_blank" href="https://plus.google.com/u/0/+ConnorLeech">Google+</a></li></ul></div><div class="col-sm-3"><h4>Email</h4><ul><li> <a href="mailto:connorleech@gmail.com">connorleech@gmail.com</a></li></ul></div></div></div></footer><!-- vendor--><script src="/bower_components/jquery/dist/jquery.min.js"></script><script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script><script src="/bower_components/wow/dist/wow.min.js"></script><script src="/bower_components/jquery-easing/jquery.easing.min.js"></script><script src="/bower_components/jquery-color/jquery.color.js"></script><script src="/bower_components/scrollmagic/scrollmagic/minified/ScrollMagic.min.js"></script><script src="/bower_components/scrollmagic/scrollmagic/minified/plugins/debug.addIndicators.min.js"></script><script src="/bower_components/vivus/dist/vivus.min.js"></script><!-- require modules--><script src="/js/require.js"></script><script src="/js/app.js"></script><!-- analytics--><!-- disqus--><script>(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://connorleech.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();</script></body></html>
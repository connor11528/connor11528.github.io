<!DOCTYPE html><html lang="en" prefix="og: http://ogp.me/ns#"><head><meta name="generator" content="Hexo 3.8.0"><meta name="author" content="Connor Leech"><title>Build a guestbook application with Laravel 5</title><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta http-equiv="cleartype" content="on"><meta name="MobileOptimized" content="320"><meta name="HandheldFriendly" content="True"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><meta name="description" content="Guestbook built with Laravel 5 API. Follow along with @rachidlaasri Scotch.io tutorial"><meta name="keywords" content="laravel, aws, javascript, php, developer, software engineer, web development, software, node.js, serverless, lambda, san francisco, bay area, east bay, vue, vuejs, vue.js, vue 2, laravel 5, amazon web services"><meta name="zipcode" content="94501"><meta name="city" content="Alameda"><meta name="state" content="California"><meta name="country" content="United States"><meta name="language" content="EN"><meta property="og:site_name" content="Connor Leech Blog | Javascript and Laravel tutorials"><meta property="og:description" content="Get notified about the latest trends in web development, career growth and cloud infrastructure. I send emails about twice a month covering tutorials in Javascript, Laravel and Cloud"><meta property="og:image" content="http://i0.kym-cdn.com/photos/images/original/001/018/899/936.jpg"><meta property="og:title" content="Build a guestbook application with Laravel 5"><meta property="og:description" content="Guestbook built with Laravel 5 API. Follow along with @rachidlaasri Scotch.io tutorial"><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-70809574-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'UA-70809574-1');
</script><!-- Favicon--><link rel="shortcut icon" type="image/png" href="/images/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><!-- Vendor Fonts--><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link href="/bower_components/animate.css/animate.min.css" rel="stylesheet" type="text/css"><link href="https://fonts.googleapis.com/css?family=Yantramanav" rel="stylesheet"><!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries--><!-- WARNING: Respond.js doesn't work if you view the page via file://--><!--if lt IE 9script(src='https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js')
script(src='https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js')
--><link rel="alternate" href="/atom.xml" title="config.title" type="application/rss2.xml"><link rel="stylesheet" href="/css/main.css"></head><body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top" class="post"><!-- Nav--><nav role="navigation" class="navbar navbar-custom navbar-fixed-top"><div class="container"><div class="navbar-header"><a href="https://employbl.com/" target="_blank" class="navbar-brand"><img src="/images/employbl_logo.svg" style="height:100px; width:100px;"></a><button type="button" data-toggle="collapse" data-target=".navbar-main-collapse" class="navbar-toggle"><i class="fa fa-bars"></i></button></div><div class="collapse navbar-collapse navbar-left navbar-main-collapse"></div><div class="collapse navbar-collapse navbar-right navbar-main-collapse"><ul class="nav navbar-nav"><li><a href="/blog" class="page-scroll">Blog 🔨</a></li><li><a href="/#about" class="page-scroll">Projects ⚡</a></li></ul></div></div></nav><main id="content"><div id="archive" class="container"><div class="row"> <div class="col-sm-2 col-md-2"><h3>Categories</h3><a href="/blog"><p>All</p></a><a href="/categories/Career"><p>Career</p></a><a href="/categories/Programming"><p>Programming</p></a><a href="/categories/Javascript"><p>Javascript</p></a><a href="/categories/Laravel"><p>Laravel</p></a><a href="/categories/Cloud"><p>Cloud</p></a><a href="/categories/PHP"><p>PHP</p></a></div><div class="col-xs-12 col-md-8"><article class="post"><div class="row"><div class="col-md-10 col-md-offset-1"><h1 class="post-title">Build a guestbook application with Laravel 5</h1></div></div><div class="row"><div class="post-meta"><h5><span>Connor Leech</span><span class="date"> - Nov 12, 2017&ensp;in<span class="post-categories">&ensp;<a href="/categories/Laravel/" class="post-category">Laravel</a></span></span></h5><a target="_blank" href="http://twitter.com/intent/tweet?status=Build a guestbook application with Laravel 5 by @Connor11528+http://connorleech.info/blog/guestbook-application-with-Laravel-5/" class="btn btn-primary social-share twitter"><i class="fa fa-twitter fa-2x"><span class="hidden-xs"></span></i></a><a target="_blank" href="http://www.linkedin.com/shareArticle?mini=true&amp;url=http://connorleech.info/blog/guestbook-application-with-Laravel-5/&amp;title=Build a guestbook application with Laravel 5&amp;source=connorleech.info" class="btn btn-primary social-share linkedin"><i class="fa fa-linkedin fa-2x"><span class="hidden-xs"></span></i></a></div></div><div class="post-body"><blockquote>
<p>Following along with <a href="https://github.com/RachidLaasri" target="_blank" rel="noopener">@rachidlaasri</a> excellent tutorial on scotch.io: <a href="https://scotch.io/tutorials/build-a-guestbook-with-laravel-and-vuejs" target="_blank" rel="noopener">Build a Guestbook with Laravel and Vue.js</a></p>
</blockquote>
<p><strong>tl;dr</strong> - source code is here: <a href="https://github.com/connor11528/guestbook" target="_blank" rel="noopener">https://github.com/connor11528/guestbook</a></p>
<h3 id="Generate-the-application"><a href="#Generate-the-application" class="headerlink" title="Generate the application"></a>Generate the application</h3><p>Use <a href="https://gist.github.com/connor11528/fcfbdb63bc9633a54f40f0a66e3d3f2e" target="_blank" rel="noopener">this script</a> to quickly scaffold a Laravel 5 app.</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">./create_laravel_app.<span class="keyword">sh</span> guestbook</span><br><span class="line"><span class="keyword">cd</span> guestbook</span><br><span class="line">php artisan serve</span><br><span class="line">npm <span class="keyword">run</span> watch</span><br></pre></td></tr></table></figure>
<h3 id="Add-a-database"><a href="#Add-a-database" class="headerlink" title="Add a database"></a>Add a database</h3><p>Add sqlite database:</p>
<figure class="highlight irpf90"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">touch</span> database/database.sqlite</span><br></pre></td></tr></table></figure>
<p>The only line you want in the <strong>.env</strong> file related to the db is: <code>DB_CONNECTION=sqlite</code>, get rid of the host, port, username business.</p>
<p>Sqlite is great for development but you probably wouldn’t use it for a production app. You could go with MySQL.
If you’re interested in hooking up Laravel 5 to MySQL check this tutorial:</p>
<p><a href="http://connorleech.info/blog/Build-an-online-forum-with-Laravel%E2%80%8A-Initial-Setup-and-Seeding-Part-1/">Laravel 5 Initial Database Setup and Seeding</a></p>
<p><code>&lt;/shameless-plug&gt;</code></p>
<h3 id="Seeding"><a href="#Seeding" class="headerlink" title="Seeding"></a>Seeding</h3><p>In the tutorial we set up a model factory for generating Signatures in our database and use tinker to generate the records. Another approach is to use database seeders.
Database seeders populate our database by running <code>php artisan db:seed</code>. This calls <strong>database/seeds/DatabaseSeeder.php</strong>. That file has a class that extends the Seeder class. 
In there is a run function that calls a seeder for generating Signatures:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;call(SignaturesTableSeeder::class);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Generate that seeder by running <code>php artisan make:seeder SignaturesTableSeeder</code> and include a call to the model factory that’s outlined in the <a href="https://scotch.io/tutorials/build-a-guestbook-with-laravel-and-vuejs" target="_blank" rel="noopener">scotch tutorial</a>.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    factory(App\Signature::class, <span class="number">100</span>)-&gt;create();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>To check and make sure it worked we could view the db in a GUI such as Sequel Pro or use tinker like:</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">php artisan tinker</span><br><span class="line">&gt; \<span class="symbol">DB:</span><span class="symbol">:table</span>(<span class="string">'signatures'</span>)-&gt;count(); <span class="regexp">//</span> view <span class="comment"># of records</span></span><br><span class="line">&gt; \<span class="symbol">DB:</span><span class="symbol">:table</span>(<span class="string">'signatures'</span>)-&gt;get(); <span class="regexp">//</span> view all records</span><br></pre></td></tr></table></figure>
<h3 id="Routes-and-Controllers"><a href="#Routes-and-Controllers" class="headerlink" title="Routes and Controllers"></a>Routes and Controllers</h3><p>In this section we set up controllers for reporting signatures, displaying them, adding them and displaying an individual resource. We’re building this as an API so I thought it was cool
that the author namespaced the controllers into an Api folder when creating them. That was as simple as <code>php artisan make:controller Api/SignatureController</code>.
Additionally, we use a Laravel <a href="https://laravel.com/docs/5.5/controllers#resource-controllers" target="_blank" rel="noopener">resource controller</a> but specify that we do not want ALL the routes, only a few:</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Route::resource<span class="function"><span class="params">(<span class="string">'signatures'</span>, <span class="string">'Api\SignatureController'</span>)</span>-&gt;</span>only([<span class="string">'index'</span>, <span class="string">'store'</span>, <span class="string">'show'</span>]);</span><br></pre></td></tr></table></figure>
<p>Most interestingly, in our controller we make calls to and return instances of <code>SignatureResource</code>, which we haven’t defined yet.</p>
<p>There’s also a nifty call to get the latest Signatures and ignore all signatures that have been flagged:</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$signatures = Signature::latest()</span><br><span class="line"><span class="function">            -&gt;</span>ignoreFlagged()</span><br><span class="line"><span class="function">            -&gt;</span>paginate(<span class="number">20</span>);</span><br></pre></td></tr></table></figure>
<p>The <code>ignoreFlagged</code> method call is a custom query scope that we define with the convention of “scopeMethodNameInCamelCase”. We defined the custom query scope in the Signature model:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">scopeIgnoreFlagged</span><span class="params">($query)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $query-&gt;where(<span class="string">'flagged_at'</span>, <span class="keyword">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The calls to latest() and paginate() are default parts of the <a href="https://laravel.com/docs/5.5/eloquent" target="_blank" rel="noopener">Eloquent ORM</a>.</p>
<p>If you’re new to Laravel it is also worth checking out the <a href="https://laravel.com/docs/5.5/routing#route-model-binding" target="_blank" rel="noopener">route model binding</a> included in the reporting signature route and controller.</p>
<p>The route looks like:</p>
<figure class="highlight sml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Route</span>::put(<span class="symbol">'signatures</span>/&#123;<span class="keyword">signature</span>&#125;/report', <span class="symbol">'Api</span>\<span class="type">ReportSignature</span>@update');</span><br></pre></td></tr></table></figure>
<p>Including the signature like this actually gives us access to the individual signature in our controller. So in the update method we pass in the database instance of the signature that we want to flag:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">update</span><span class="params">(Signature $signature)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    $signature-&gt;flag();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> $signature;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Flag is a custom method we define in the Signature model.</p>
<h3 id="The-Signature-Resource"><a href="#The-Signature-Resource" class="headerlink" title="The Signature Resource"></a>The Signature Resource</h3><p>Eloquent Resources (<a href="https://laravel.com/docs/5.5/eloquent-resources" target="_blank" rel="noopener">docs</a>) are new in Laravel 5.5. Resources are a middle layer between your database and the JSON responses you send out to end users.
In our case we’re going to modify the data so we don’t send out people’s email addresses and send an avatar for their image.</p>
<blockquote>
<p>Jeffery Way posted a Laracast about API Resources: <a href="https://laracasts.com/series/whats-new-in-laravel-5-5/episodes/20" target="_blank" rel="noopener">What’s New in Laravel 5.5: API Resources</a></p>
</blockquote>
<p>In order to define a custom <code>avatar</code> attribute for signature instances we use the synatax “getAttributNameAttribute” syntax for out function:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getAvatarAttribute</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> sprintf(<span class="string">'https://www.gravatar.com/avatar/%s?s=100'</span>, md5(<span class="keyword">$this</span>-&gt;email));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>sprintf</code> returns a formatted string in PHP and <code>md5</code> creates a hash. Gravatar is a service that grabs a photo for the user based on their email address.</p>
<h3 id="Vue-js-frontend"><a href="#Vue-js-frontend" class="headerlink" title="Vue.js frontend"></a>Vue.js frontend</h3><p>@rachidlaasri builds out an awesome Vue.js frontend and takes advantage of a vue-paginate prebuilt component (<a href="https://github.com/lokyoung/vuejs-paginate" target="_blank" rel="noopener">avail here</a>). The pagination logic is especially interesting in the Signatures vue component. 
Reporting a signature and then removing it from the UI with lodash is pretty neat also:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">report(id) &#123;</span><br><span class="line">    <span class="keyword">if</span>(confirm(<span class="string">'Are you sure you want to report this signature?'</span>)) &#123;</span><br><span class="line">        axios.put(<span class="string">'api/signatures/'</span>+id+<span class="string">'/report'</span>)</span><br><span class="line">        .then(<span class="function"><span class="params">response</span> =&gt;</span> <span class="keyword">this</span>.removeSignature(id));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">removeSignature(id) &#123;</span><br><span class="line">    <span class="keyword">this</span>.signatures = _.remove(<span class="keyword">this</span>.signatures, <span class="function"><span class="keyword">function</span> (<span class="params">signature</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> signature.id !== id;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Here we take advantage of lodash <a href="https://lodash.com/docs/#remove" target="_blank" rel="noopener">remove method</a>.</p>
<p>On our SignatureForm.vue there is a success message that displays conditionally when our signature is submitted:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"alert alert-success"</span> v-<span class="keyword">if</span>=<span class="string">"saved"</span>&gt;</span><br><span class="line">    &lt;strong&gt;Success!<span class="xml"><span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span> Your signature has been saved successfully.</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>Overall very good tutorial about building an API with Laravel 5.5 that hooks up to a Vue 2 frontend. We used a lot of Laravel configuration concepts to extend our models and even built a resource layer to modify the JSON that we return to Vue.</p>
<p>Make sure to check out the full tutorial <a href="https://scotch.io/tutorials/build-a-guestbook-with-laravel-and-vuejs" target="_blank" rel="noopener">on Scotch.io</a></p>
</div><div id="disqus_thread"></div></article><nav class="pagination"><a href="/blog/2-Types-of-Software-Engineering-Interviews/" title="The 2 types of software engineering interviews and how to prepare for them" class="btn-default entry-pagination__link entry-pagination__link--prev">Prev</a><a href="/blog/Debugging-and-development-tools-for-Laravel-5/" title="Debugging and development tools for Laravel 5" class="btn-default entry-pagination__link entry-pagination__link--next">Next</a></nav></div></div></div></main><footer class="footer"><div class="container"><div class="row"><div class="col-sm-6"><h4>Connor's Dev Newsletter</h4><p>Very occassional updates. You're free to sign up.</p><ul><li><form action="//herokuapp.us14.list-manage.com/subscribe/post?u=42dd73a709fbadb4a29ef1d0d&amp;amp;id=b77fdad58d" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank" novalidate="" class="validate"><div class="input-group"><input type="email" value="" name="EMAIL" id="mce-EMAIL" placeholder="Enter your email here" class="required email form-control input-lg"><div id="mce-error-response" style="display:none" class="response"></div><div id="mce-success-response" style="display:none" class="response"></div><div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_42dd73a709fbadb4a29ef1d0d_b77fdad58d" tabindex="-1" value=""></div><span class="input-group-btn"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn btn-primary btn-lg"></span></div></form></li></ul></div><div class="col-sm-2 col-sm-offset-1"><h4>Connect</h4><ul><li> <a target="_blank" href="https://github.com/connor11528">GitHub</a></li><li> <a target="_blank" href="https://www.linkedin.com/in/connorleech">LinkedIn</a></li><li> <a target="_blank" href="https://twitter.com/connor11528">Twitter</a></li><li><a target="_blank" href="https://medium.com/@connorleech">Medium</a></li><li><a target="_blank" href="https://stackoverflow.com/users/2031033/connor-leech">Stackoverflow</a></li><li><a target="_blank" href="https://plus.google.com/u/0/+ConnorLeech">Google+</a></li></ul></div><div class="col-sm-3"><h4>Email</h4><ul><li> <a href="mailto:connorleech@gmail.com">connorleech@gmail.com</a></li></ul></div></div></div></footer><!-- vendor--><script src="/bower_components/jquery/dist/jquery.min.js"></script><script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script><script src="/bower_components/wow/dist/wow.min.js"></script><script src="/bower_components/jquery-easing/jquery.easing.min.js"></script><script src="/bower_components/jquery-color/jquery.color.js"></script><script src="/bower_components/scrollmagic/scrollmagic/minified/ScrollMagic.min.js"></script><script src="/bower_components/scrollmagic/scrollmagic/minified/plugins/debug.addIndicators.min.js"></script><script src="/bower_components/vivus/dist/vivus.min.js"></script><!-- require modules--><script src="/js/require.js"></script><script src="/js/app.js"></script><!-- analytics--><!-- disqus--><script>(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://connorleech.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();</script></body></html>
<!DOCTYPE html><html lang="en" prefix="og: http://ogp.me/ns#"><head><meta name="generator" content="Hexo 3.8.0"><meta name="author" content="Connor Leech"><title>Make Maps with Angular 1.x and Leaflet using Directives</title><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta http-equiv="cleartype" content="on"><meta name="MobileOptimized" content="320"><meta name="HandheldFriendly" content="True"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><meta name="description" content="this tutorial goes into how to use the angular-leaflet directive (built by the Angular 1.x community for integrating maps into web applications. Leaflet is a Javascript mapping library."><meta name="keywords" content="laravel, aws, javascript, php, developer, software engineer, web development, software, node.js, serverless, lambda, san francisco, bay area, east bay, vue, vuejs, vue.js, vue 2, laravel 5, amazon web services"><meta name="zipcode" content="94501"><meta name="city" content="Alameda"><meta name="state" content="California"><meta name="country" content="United States"><meta name="language" content="EN"><meta property="og:site_name" content="Connor Leech Blog | Javascript and Laravel tutorials"><meta property="og:description" content="Get notified about the latest trends in web development, career growth and cloud infrastructure. I send emails about twice a month covering tutorials in Javascript, Laravel and Cloud"><meta property="og:image" content="http://i0.kym-cdn.com/photos/images/original/001/018/899/936.jpg"><meta property="og:title" content="Make Maps with Angular 1.x and Leaflet using Directives"><meta property="og:description" content="this tutorial goes into how to use the angular-leaflet directive (built by the Angular 1.x community for integrating maps into web applications. Leaflet is a Javascript mapping library."><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-70809574-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'UA-70809574-1');
</script><!-- Favicon--><link rel="shortcut icon" type="image/png" href="/images/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><!-- Vendor Fonts--><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link href="/bower_components/animate.css/animate.min.css" rel="stylesheet" type="text/css"><link href="https://fonts.googleapis.com/css?family=Yantramanav" rel="stylesheet"><!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries--><!-- WARNING: Respond.js doesn't work if you view the page via file://--><!--if lt IE 9script(src='https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js')
script(src='https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js')
--><link rel="alternate" href="/atom.xml" title="config.title" type="application/rss2.xml"><link rel="stylesheet" href="/css/main.css"></head><body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top" class="post"><!-- Nav--><nav role="navigation" class="navbar navbar-custom navbar-fixed-top"><div class="container"><div class="navbar-header"><a href="https://employbl.com/" target="_blank" class="navbar-brand"><img src="/images/employbl_logo.svg" style="height:100px; width:100px;"></a><button type="button" data-toggle="collapse" data-target=".navbar-main-collapse" class="navbar-toggle"><i class="fa fa-bars"></i></button></div><div class="collapse navbar-collapse navbar-left navbar-main-collapse"></div><div class="collapse navbar-collapse navbar-right navbar-main-collapse"><ul class="nav navbar-nav"><li><a href="/blog" class="page-scroll">Blog ðŸ”¨</a></li><li><a href="/#about" class="page-scroll">Projects âš¡</a></li></ul></div></div></nav><main id="content"><div id="archive" class="container"><div class="row"> <div class="col-sm-2 col-md-2"><h3>Categories</h3><a href="/blog"><p>All</p></a><a href="/categories/Career"><p>Career</p></a><a href="/categories/Programming"><p>Programming</p></a><a href="/categories/Javascript"><p>Javascript</p></a><a href="/categories/Laravel"><p>Laravel</p></a><a href="/categories/Cloud"><p>Cloud</p></a><a href="/categories/PHP"><p>PHP</p></a></div><div class="col-xs-12 col-md-8"><article class="post"><div class="row"><div class="col-md-10 col-md-offset-1"><h1 class="post-title">Make Maps with Angular 1.x and Leaflet using Directives</h1></div></div><div class="row"><div class="post-meta"><h5><span>Connor Leech</span><span class="date"> - Oct 23, 2015&ensp;in<span class="post-categories">&ensp;<a href="/categories/Javascript/" class="post-category">Javascript</a></span></span></h5><a target="_blank" href="http://twitter.com/intent/tweet?status=Make Maps with Angular 1.x and Leaflet using Directives by @Connor11528+http://connorleech.info/blog/How-to-use-the-angular-leaflet-directive/" class="btn btn-primary social-share twitter"><i class="fa fa-twitter fa-2x"><span class="hidden-xs"></span></i></a><a target="_blank" href="http://www.linkedin.com/shareArticle?mini=true&amp;url=http://connorleech.info/blog/How-to-use-the-angular-leaflet-directive/&amp;title=Make Maps with Angular 1.x and Leaflet using Directives&amp;source=connorleech.info" class="btn btn-primary social-share linkedin"><i class="fa fa-linkedin fa-2x"><span class="hidden-xs"></span></i></a></div></div><div class="post-body"><p>Make some maps with angular.js</p>
<p>This is a quick tutorial on how to add maps to your angular.js application. Using google maps API or leaflet.js by themselves is simple. Unfortunately manipulating the DOM is not always straightforward in angular.js projects. External libraries need to be packaged into angular.js directives. Fortunately there is a legit Angular community that has done the heavy lifting for us. </p>
<p>Weâ€™re going to use <a href="https://github.com/tombatossals/angular-leaflet-directive" target="_blank" rel="noopener">angular-leaflet-directive</a>.</p>
<p>Hereâ€™s the <a href="https://gist.github.com/jasonshark/a090c329185b94a19de2" target="_blank" rel="noopener">gist</a> of the finished code on the github.</p>
<p>First include all the scripts. We need the angular library, leaflet, the directive code and our script:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>My Mapping App<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://cdn.leafletjs.com/leaflet-0.7.1/leaflet.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://ajax.googleapis.com/ajax/libs/angularjs/1.2.6/angular.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./angular-leaflet-directive.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'./app.js'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Note we also included the leaflet.css in the head. Next we need to inject the directive as a dependency to our application when we initialize our app:</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">var app</span> = angular.module(<span class="string">"mymapingapp"</span>, [</span><br><span class="line">    <span class="string">"leaflet-directive"</span></span><br><span class="line">]);</span><br></pre></td></tr></table></figure>
<p>Now link our angular module to the app. Add <code>ng-app=&quot;mymapingapp&quot;</code> to the <html> like a pro. Also attach <code>ng-controller=&quot;MainCtrl&quot;</code> to the body or the section where we want the map. Weâ€™ll use the angular.js controller in order to provide options to the map and other goodies. Weâ€™ll do this by extending the controllerâ€™s scope with some properties. The angular-leaflet directive will read these properties off the controllerâ€™s scope and update automatically. Hereâ€™s the controller with the options:</html></p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">app</span><span class="selector-class">.controller</span>(<span class="string">'MainCtrl'</span>, [<span class="string">'$scope'</span>, function($scope) &#123;</span><br><span class="line">	<span class="comment">// make map</span></span><br><span class="line">    <span class="selector-tag">angular</span><span class="selector-class">.extend</span>($scope, &#123;</span><br><span class="line">        <span class="attribute">san_fran</span>: &#123;</span><br><span class="line">            <span class="attribute">lat</span>: <span class="number">37.78</span>,</span><br><span class="line">            <span class="attribute">lng</span>: -<span class="number">122.42</span>,</span><br><span class="line">            <span class="attribute">zoom</span>: <span class="number">13</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attribute">events</span>: &#123;&#125;,</span><br><span class="line">        <span class="attribute">layers</span>: &#123;</span><br><span class="line">            <span class="attribute">baselayers</span>: &#123;</span><br><span class="line">                <span class="attribute">osm</span>: &#123;</span><br><span class="line">                    <span class="attribute">name</span>: <span class="string">'OpenStreetMap'</span>,</span><br><span class="line">                    <span class="attribute">url</span>: <span class="string">'https://&#123;s&#125;.tiles.mapbox.com/v3/examples.map-i875mjb7/&#123;z&#125;/&#123;x&#125;/&#123;y&#125;.png'</span>,</span><br><span class="line">                    <span class="attribute">type</span>: <span class="string">'xyz'</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attribute">defaults</span>: &#123;</span><br><span class="line">            <span class="attribute">scrollWheelZoom</span>: false</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;]);</span><br></pre></td></tr></table></figure>
<p>As you can see weâ€™re extending the $scope object with more properties. Weâ€™ll feed these to the directive like whoa:</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;leaflet <span class="attribute">center</span>=<span class="string">"san_fran"</span> <span class="attribute">markers</span>=<span class="string">"markers"</span> <span class="attribute">event-broadcast</span>=<span class="string">"events"</span> <span class="attribute">defaults</span>=<span class="string">"defaults"</span> <span class="attribute">id</span>=<span class="string">'map'</span>&gt;&lt;/leaflet&gt;</span><br></pre></td></tr></table></figure>
<p>There are a ton more options. Like a jackass Iâ€™m going to encourage you to check out the <a href="http://tombatossals.github.io/angular-leaflet-directive/#!/" target="_blank" rel="noopener">documentation</a>.</p>
<p>You also need to give the map element a height and width. I select it using an id. Add this CSS: <code>#map{ height: 450px width: 450px; }</code></p>
<p>So we have a map. Whoop dee do! Itâ€™s kind of a lot of code, but we know itâ€™s the Angular Way&#0153;.</p>
<p>Weâ€™ll make our map a bit more interesting. When we click the map letâ€™s add a marker. That is what the <a href="http://tombatossals.github.io/angular-leaflet-directive/#!/examples/events" target="_blank" rel="noopener">events</a> property on the controller scope is for.</p>
<p>Weâ€™ll listen for clicks to the map. When a click goes down weâ€™ll add a new marker to the array:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// add marker</span></span><br><span class="line">$scope.markers = <span class="keyword">new</span> <span class="keyword">Array</span>();</span><br><span class="line">$scope.$on(<span class="string">"leafletDirectiveMap.click"</span>, <span class="function"><span class="keyword">function</span><span class="params">(event, args)</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> leafEvent = args.leafletEvent;</span><br><span class="line">    $scope.markers.push(&#123;</span><br><span class="line">        lat: leafEvent.latlng.lat,</span><br><span class="line">        lng: leafEvent.latlng.lng,</span><br><span class="line">        draggable: <span class="keyword">true</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>So now everytime you click the map youâ€™ll have annoying draggable markers. Adjust the properties on the controller scope and link that to the <code>&lt;leaflet&gt;</code> directive attributes and you have an angulartastic map!</p>
<p>You can peep the finished code in this <a href="https://gist.github.com/jasonshark/a090c329185b94a19de2" target="_blank" rel="noopener">Github Gist</a></p>
</div><div id="disqus_thread"></div></article><nav class="pagination"><a href="/blog/Build-todo-list-with-angular-and-DRF/" title="Build todo list with Angular 1.x and Django Rest Framework (DRF)" class="btn-default entry-pagination__link entry-pagination__link--prev">Prev</a><a href="/blog/Build-a-Soundboard/" title="Play recorded sounds with Sound.js" class="btn-default entry-pagination__link entry-pagination__link--next">Next</a></nav></div></div></div></main><footer class="footer"><div class="container"><div class="row"><div class="col-sm-6"><h4>Connor's Dev Newsletter</h4><p>Very occassional updates. You're free to sign up.</p><ul><li><form action="//herokuapp.us14.list-manage.com/subscribe/post?u=42dd73a709fbadb4a29ef1d0d&amp;amp;id=b77fdad58d" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank" novalidate="" class="validate"><div class="input-group"><input type="email" value="" name="EMAIL" id="mce-EMAIL" placeholder="Enter your email here" class="required email form-control input-lg"><div id="mce-error-response" style="display:none" class="response"></div><div id="mce-success-response" style="display:none" class="response"></div><div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_42dd73a709fbadb4a29ef1d0d_b77fdad58d" tabindex="-1" value=""></div><span class="input-group-btn"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn btn-primary btn-lg"></span></div></form></li></ul></div><div class="col-sm-2 col-sm-offset-1"><h4>Connect</h4><ul><li> <a target="_blank" href="https://github.com/connor11528">GitHub</a></li><li> <a target="_blank" href="https://www.linkedin.com/in/connorleech">LinkedIn</a></li><li> <a target="_blank" href="https://twitter.com/connor11528">Twitter</a></li><li><a target="_blank" href="https://medium.com/@connorleech">Medium</a></li><li><a target="_blank" href="https://stackoverflow.com/users/2031033/connor-leech">Stackoverflow</a></li><li><a target="_blank" href="https://plus.google.com/u/0/+ConnorLeech">Google+</a></li></ul></div><div class="col-sm-3"><h4>Email</h4><ul><li> <a href="mailto:connorleech@gmail.com">connorleech@gmail.com</a></li></ul></div></div></div></footer><!-- vendor--><script src="/bower_components/jquery/dist/jquery.min.js"></script><script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script><script src="/bower_components/wow/dist/wow.min.js"></script><script src="/bower_components/jquery-easing/jquery.easing.min.js"></script><script src="/bower_components/jquery-color/jquery.color.js"></script><script src="/bower_components/scrollmagic/scrollmagic/minified/ScrollMagic.min.js"></script><script src="/bower_components/scrollmagic/scrollmagic/minified/plugins/debug.addIndicators.min.js"></script><script src="/bower_components/vivus/dist/vivus.min.js"></script><!-- require modules--><script src="/js/require.js"></script><script src="/js/app.js"></script><!-- analytics--><!-- disqus--><script>(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://connorleech.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();</script></body></html>
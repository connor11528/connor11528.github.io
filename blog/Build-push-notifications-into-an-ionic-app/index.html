<!DOCTYPE html><html lang="en" prefix="og: http://ogp.me/ns#"><head><meta name="generator" content="Hexo 3.8.0"><meta name="author" content="Connor Leech"><title>Build push notifications into an Ionic 1.x app</title><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta http-equiv="cleartype" content="on"><meta name="MobileOptimized" content="320"><meta name="HandheldFriendly" content="True"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><meta name="description" content="Ionic is a framework for using Angular and Javascript to build native mobile applications. This post goes through adding push messaging using Ionic 1.x and Angular 1.x. It uses Phonegap under the hood."><meta name="keywords" content="laravel, aws, javascript, php, developer, software engineer, web development, software, node.js, serverless, lambda, san francisco, bay area, east bay, vue, vuejs, vue.js, vue 2, laravel 5, amazon web services"><meta name="zipcode" content="94501"><meta name="city" content="Alameda"><meta name="state" content="California"><meta name="country" content="United States"><meta name="language" content="EN"><meta property="og:site_name" content="Connor Leech Blog | Javascript and Laravel tutorials"><meta property="og:description" content="Get notified about the latest trends in web development, career growth and cloud infrastructure. I send emails about twice a month covering tutorials in Javascript, Laravel and Cloud"><meta property="og:image" content="http://i0.kym-cdn.com/photos/images/original/001/018/899/936.jpg"><meta property="og:title" content="Build push notifications into an Ionic 1.x app"><meta property="og:description" content="Ionic is a framework for using Angular and Javascript to build native mobile applications. This post goes through adding push messaging using Ionic 1.x and Angular 1.x. It uses Phonegap under the hood."><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-70809574-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'UA-70809574-1');
</script><!-- Favicon--><link rel="shortcut icon" type="image/png" href="/images/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><!-- Vendor Fonts--><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link href="/bower_components/animate.css/animate.min.css" rel="stylesheet" type="text/css"><link href="https://fonts.googleapis.com/css?family=Yantramanav" rel="stylesheet"><!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries--><!-- WARNING: Respond.js doesn't work if you view the page via file://--><!--if lt IE 9script(src='https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js')
script(src='https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js')
--><link rel="alternate" href="/atom.xml" title="config.title" type="application/rss2.xml"><link rel="stylesheet" href="/css/main.css"></head><body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top" class="post"><!-- Nav--><nav role="navigation" class="navbar navbar-custom navbar-fixed-top"><div class="container"><div class="navbar-header"><a href="https://employbl.com/" target="_blank" class="navbar-brand"><img src="/images/employbl_logo.svg" style="height:100px; width:100px;"></a><button type="button" data-toggle="collapse" data-target=".navbar-main-collapse" class="navbar-toggle"><i class="fa fa-bars"></i></button></div><div class="collapse navbar-collapse navbar-left navbar-main-collapse"></div><div class="collapse navbar-collapse navbar-right navbar-main-collapse"><ul class="nav navbar-nav"><li><a href="/blog" class="page-scroll">Blog üî®</a></li><li><a href="/#about" class="page-scroll">Projects ‚ö°</a></li></ul></div></div></nav><main id="content"><div id="archive" class="container"><div class="row"> <div class="col-sm-2 col-md-2"><h3>Categories</h3><a href="/blog"><p>All</p></a><a href="/categories/Career"><p>Career</p></a><a href="/categories/Programming"><p>Programming</p></a><a href="/categories/Javascript"><p>Javascript</p></a><a href="/categories/Laravel"><p>Laravel</p></a><a href="/categories/Cloud"><p>Cloud</p></a><a href="/categories/PHP"><p>PHP</p></a></div><div class="col-xs-12 col-md-8"><article class="post"><div class="row"><div class="col-md-10 col-md-offset-1"><h1 class="post-title">Build push notifications into an Ionic 1.x app</h1></div></div><div class="row"><div class="post-meta"><h5><span>Connor Leech</span><span class="date"> - Oct 23, 2015&ensp;in<span class="post-categories">&ensp;<a href="/categories/Javascript/" class="post-category">Javascript</a></span></span></h5><a target="_blank" href="http://twitter.com/intent/tweet?status=Build push notifications into an Ionic 1.x app by @Connor11528+http://connorleech.info/blog/Build-push-notifications-into-an-ionic-app/" class="btn btn-primary social-share twitter"><i class="fa fa-twitter fa-2x"><span class="hidden-xs"></span></i></a><a target="_blank" href="http://www.linkedin.com/shareArticle?mini=true&amp;url=http://connorleech.info/blog/Build-push-notifications-into-an-ionic-app/&amp;title=Build push notifications into an Ionic 1.x app&amp;source=connorleech.info" class="btn btn-primary social-share linkedin"><i class="fa fa-linkedin fa-2x"><span class="hidden-xs"></span></i></a></div></div><div class="post-body"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ionic start ionic-push-starter io</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> ionic-push-starter</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ionic upload</span></span><br></pre></td></tr></table></figure>
<p>Your app should be available at <a href="https://apps.ionic.io/apps" target="_blank" rel="noopener">ionic.io</a>. Theoretically you can view your apps with Ionic View, a mobile app. I‚Äôm running android 4.1.2 and it no workey.</p>
<p>Add a plugin for connecting to the internet with android:</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cordova plugin <span class="keyword">add</span><span class="bash"> cordova-plugin-whitelist</span></span><br></pre></td></tr></table></figure>
<p>With my testing my other ionic apps missing this plugin was driving me crazy <a href="https://blog.nraboy.com/2015/05/whitelist-external-resources-for-use-in-ionic-framework/" target="_blank" rel="noopener">this blog post</a> helped me out. The author has a lot of good tutorials.</p>
<p>Paste in this code to <code>www/js/app.js</code>:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">.config([<span class="string">'$ionicAppProvider'</span>, <span class="function"><span class="keyword">function</span><span class="params">($ionicAppProvider)</span> </span>&#123;</span><br><span class="line">  <span class="comment">// Identify app</span></span><br><span class="line">  $ionicAppProvider.identify(&#123;</span><br><span class="line">    <span class="comment">// The App ID (from apps.ionic.io) for the server</span></span><br><span class="line">    app_id: <span class="string">'YOUR_APP_ID'</span>,</span><br><span class="line">    <span class="comment">// The public API key all services will use for this app</span></span><br><span class="line">    api_key: <span class="string">'YOUR_PUBLIC_API_KEY'</span>,</span><br><span class="line">    <span class="comment">// The GCM project ID (project number) from your Google Developer Console (un-comment if used)</span></span><br><span class="line">    <span class="comment">// gcm_id: 'YOUR_GCM_ID'</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;])</span><br></pre></td></tr></table></figure>
<p>The <code>app_id</code> comes from <a href="https://apps.ionic.io/apps" target="_blank" rel="noopener">https://apps.ionic.io/apps</a> and look your at your app‚Äôs id. <code>api_key</code> comes from your apps page &gt; Settings &gt; Keys &gt; Public Key.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ionic platform add android</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ionic build android</span></span><br></pre></td></tr></table></figure>
<p>This will build your android application. I email this file: <code>ionic-push-starter/platforms/android/build/outputs/apk/android-debug.apk</code> to myself and download my app on my phone. <code>.apk</code> is the filetype of your android app. Ionic converts your html, css and js into native code.</p>
<p>Email the above file to yourself. You may have to disable some security settings on your android phone.</p>
<p>Note:
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ionic <span class="built_in">emulate</span> android</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ionic serve</span></span><br></pre></td></tr></table></figure></p>
<p>Are the ways to test in the emulator and browser. We don‚Äôt have push notification functionality there. To use the android emulator you must have the android sdk installed. Push notifications must be tested on a physical device. Open the app, go to the push tab, you‚Äôll see Ionic‚Äôs note on that.</p>
<h4 id="set-up-Google-Cloud-Messaging"><a href="#set-up-Google-Cloud-Messaging" class="headerlink" title="set up Google Cloud Messaging"></a>set up Google Cloud Messaging</h4><p>This is all pretty much from the <a href="http://docs.ionic.io/v1.0/docs/push-android-setup" target="_blank" rel="noopener">docs</a>.</p>
<p>Click ‚ÄúCreate Project‚Äù on <a href="https://console.developers.google.com/project" target="_blank" rel="noopener">google developer console</a>.</p>
<p>Copy in the top bar your <strong>Project ID</strong> and <strong>Project Number</strong>. The Project Number will later become your <strong>GCM sender ID</strong>. </p>
<p>Turn on <strong>Google Cloud Messaging for Android</strong> under Mobile APIs.</p>
<p><img src="/content/images/2015/06/Screen-Shot-2015-06-12-at-6-54-09-PM.png" alt=""></p>
<p>Then click ‚ÄúEnable API‚Äù. It is taking a bit of time for me</p>
<p><img src="/content/images/2015/06/Screen-Shot-2015-06-12-at-6-54-33-PM.png" alt=""></p>
<p>Then create API Public Access Key. Click <strong>Create new Key</strong>.</p>
<p><img src="/content/images/2015/06/Screen-Shot-2015-06-12-at-7-04-28-PM.png" alt=""></p>
<p>From the ionic docs</p>
<blockquote>
<p>In the Create a new key dialog, click Server key.</p>
</blockquote>
<blockquote>
<p>In the resulting configuration dialog leave the box blank to allow connections from any IP</p>
</blockquote>
<p>Save the <strong>API Key</strong> that was generated.</p>
<p>Send the google key to the ionic push service. They will be taking care of this for us.</p>
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ionic <span class="keyword">push</span> --google-api-<span class="built_in">key</span> your-google-api-<span class="built_in">key</span></span><br><span class="line">Google API <span class="built_in">Key</span> <span class="built_in">Saved</span></span><br></pre></td></tr></table></figure>
<h4 id="Back-to-the-code"><a href="#Back-to-the-code" class="headerlink" title="Back to the code"></a>Back to the code</h4><p>In <code>www/js/app.js</code> go into the <code>.config</code> block we copied in earlier. Uncomment the <code>gcm_id</code> property and add the <strong>Project Number</strong> that‚Äôs on the homepage of your google app (click Overview).</p>
<p>Add the plugin:</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ionic plugin <span class="built_in">add</span> http<span class="variable">s:</span>//github.<span class="keyword">com</span>/phonegap-build/PushPlugin.git</span><br></pre></td></tr></table></figure>
<p>Now email the app to yourself, download it on your phone. Click register and an alert box with the token will appear</p></div><div id="disqus_thread"></div></article><nav class="pagination"><a href="/blog/Create-a-starter-template-for-working-with-django-rest-framework/" title="Create a starter template for working with django-rest-framework" class="btn-default entry-pagination__link entry-pagination__link--prev">Prev</a><a href="/blog/Build-todo-list-with-angular-and-DRF/" title="Build todo list with Angular 1.x and Django Rest Framework (DRF)" class="btn-default entry-pagination__link entry-pagination__link--next">Next</a></nav></div></div></div></main><footer class="footer"><div class="container"><div class="row"><div class="col-sm-6"><h4>Connor's Dev Newsletter</h4><p>Very occassional updates. You're free to sign up.</p><ul><li><form action="//herokuapp.us14.list-manage.com/subscribe/post?u=42dd73a709fbadb4a29ef1d0d&amp;amp;id=b77fdad58d" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank" novalidate="" class="validate"><div class="input-group"><input type="email" value="" name="EMAIL" id="mce-EMAIL" placeholder="Enter your email here" class="required email form-control input-lg"><div id="mce-error-response" style="display:none" class="response"></div><div id="mce-success-response" style="display:none" class="response"></div><div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_42dd73a709fbadb4a29ef1d0d_b77fdad58d" tabindex="-1" value=""></div><span class="input-group-btn"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn btn-primary btn-lg"></span></div></form></li></ul></div><div class="col-sm-2 col-sm-offset-1"><h4>Connect</h4><ul><li> <a target="_blank" href="https://github.com/connor11528">GitHub</a></li><li> <a target="_blank" href="https://www.linkedin.com/in/connorleech">LinkedIn</a></li><li> <a target="_blank" href="https://twitter.com/connor11528">Twitter</a></li><li><a target="_blank" href="https://medium.com/@connorleech">Medium</a></li><li><a target="_blank" href="https://stackoverflow.com/users/2031033/connor-leech">Stackoverflow</a></li><li><a target="_blank" href="https://plus.google.com/u/0/+ConnorLeech">Google+</a></li></ul></div><div class="col-sm-3"><h4>Email</h4><ul><li> <a href="mailto:connorleech@gmail.com">connorleech@gmail.com</a></li></ul></div></div></div></footer><!-- vendor--><script src="/bower_components/jquery/dist/jquery.min.js"></script><script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script><script src="/bower_components/wow/dist/wow.min.js"></script><script src="/bower_components/jquery-easing/jquery.easing.min.js"></script><script src="/bower_components/jquery-color/jquery.color.js"></script><script src="/bower_components/scrollmagic/scrollmagic/minified/ScrollMagic.min.js"></script><script src="/bower_components/scrollmagic/scrollmagic/minified/plugins/debug.addIndicators.min.js"></script><script src="/bower_components/vivus/dist/vivus.min.js"></script><!-- require modules--><script src="/js/require.js"></script><script src="/js/app.js"></script><!-- analytics--><!-- disqus--><script>(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://connorleech.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();</script></body></html>